const zh = {
  title: 'YouTube 视频分析',
  refresh: '刷新',
  config: '配置',
  searchPlaceholder: '搜索标题...',
  searchInKeywords: '含关键词',
  transcriptAll: '字幕：全部',
  transcriptHas: '有字幕',
  transcriptNo: '无字幕',
  transcriptWhisper: 'Whisper 转换',
  transcriptNative: '自带字幕',
  transcriptWhisperFilter: '自动转换',
  categoryAll: '分类：全部',
  categoryProduct: '产品介绍',
  categoryNonProduct: '非产品介绍',
  categoryOther: '其他',
  rankAll: 'Rank：全部',
  rankFilter: '等级筛选',
  rankSOnly: '仅 S',
  rankAAbove: 'A 级以上',
  rankBAbove: 'B 级以上',
  dateFrom: '起始',
  dateTo: '结束',
  viewsMin: '播放量≥',
  viewsMax: '≤',
  viewsAny: '不选',
  sortDate: '日期',
  sortScore: 'Score',
  sortViews: '播放量',
  sortRank: 'Rank',
  perPage: '每页',
  items: '条',
  totalPage: '共 {n} 条，第 {p}/{t} 页',
  loading: '加载中...',
  noMatch: '无匹配视频',
  clickVideoForTranscript: '点击左侧视频查看字幕',
  transcriptSummary: '字幕与总结',
  summary: '摘要',
  detailedTranscript: '详细字幕',
  noTranscript: '该视频无字幕',
  transcriptNotFound: '未找到字幕',
  aiChat: '智能问答',
  scopeAll: '全部视频',
  scopeCurrent: '当前视频',
  scopeCategory: '按等级',
  askPlaceholder: '输入问题，如：Palantir AIP 的核心功能有哪些？',
  filterCounts: '三类筛选数量（符合任一即保留）',
  views20k: '播放量 20K+',
  since2024: '2024年1月+',
  keywordMatch: '关键词匹配',
  filteredTotal: '去重后需处理',
  channelTotal: '频道总视频',
  totalVideos: '总视频数',
  sLevelRatio: 'S 级占比',
  hasTranscript: '有字幕',
  aboveA: 'A 级以上',
  failed: '失败',
  retryHint: '需重试',
  taskProgress: '任务进度',
  noTaskInProgress: '当前没有任务进行',
  whisperConfirmTitle: '确认 Whisper 转换',
  whisperConfirmMsg: '将对 {n} 个无字幕视频执行 Whisper 语音转文字，预计需要较长时间。确认开始？',
  convertSingleConfirm: '确定对此视频执行 Whisper 转换？',
  cancel: '取消',
  confirm: '确认',
  saved: '已保存',
  processing: '正在处理...',
  filtering: '正在筛选...',
  copyCmd: '复制命令',
  retryHintDesc: '在项目根目录运行上述命令，手动重新处理失败项',
  failedVideos: '失败视频',
  openYoutube: '打开 YouTube',
  labelTitle: '标题',
  labelDate: '发布日期',
  labelScore: '评分',
  labelRank: '等级',
  labelViews: '播放量',
  labelTranscript: '字幕',
  generatingSummary: '生成总结中...',
  scopeFree: '自由检索',
  rankSLevel: 'S 级',
  rankALevel: 'A 级',
  rankBLevel: 'B 级',
  me: '我',
  ai: 'AI',
  requestFailed: '请求失败',
  error: '错误',
  configTitle: '评分规则配置',
  close: '关闭',
  keywordWeights: '关键词权重',
  keywordWeightsDesc: '匹配到关键词时对应的加分',
  points: '分',
  rankThresholds: '等级阈值',
  rankThresholdsDesc: 'Score 达到以下分数对应的等级',
  rankLevel: '级',
  weightDistribution: '权重分配',
  weightDistributionDesc: '评分公式中的各维度权重',
  weightView: '播放量',
  weightTime: '时效性',
  weightKeyword: '关键词',
  configHint: '配置来自 config.json，修改后需重新运行 Python 脚本生效。',
  save: '保存',
  saving: '保存中…',
  saveSuccess: '✓ 已保存',
  saveFailed: '✗ 保存失败',
  runAnalysis: '运行分析',
  runAnalysisStarting: '已启动...',
  runAnalysisFull: '完整流程',
  runAnalysisFilterOnly: '仅筛选',
  runAnalysisWhisper: 'Whisper 转录',
  runAnalysisRetry: '重试失败',
  runAnalysisOthers: '处理其他',
  filterProgress: '筛选进度',
  processProgress: '处理进度',
  savedCount: '已保存',
  catOthers: '其他类',
  categoryStats: '分类统计',
  uncategorized: '未分类',
  processHistory: '处理进度历史',
  whisperProgress: 'Whisper 转换',
  whisperConverting: 'Whisper 转换中...',
  selectBoard: '选择看板',
  tempBoard: '临时看板',
  pasteVideoUrls: '粘贴 1-5 个 YouTube 视频链接（每行一个）',
  tempBoardDesc: '上传 YouTube 视频链接进行提取解析和字幕转换，一次最多 5 个',
  tempBoardInputPlaceholder: 'https://www.youtube.com/watch?v=xxxxx',
  tempBoardAdd: '添加',
  tempBoardUpload: '上传',
  tempBoardConfirm: '确定转换',
  tempBoardHint: '已添加 {n}/{max} 个链接',
  tempCleanEmpty: '清理空记录',
  tempEmptyHint: '转换完成后视频将显示在这里',
  converting: '转换中...',
  delete: '删除',
  convertNow: '立即转换',
  convertTranscript: '转换字幕',
  transcriptViewMode: '字幕显示',
  transcriptEn: '英语',
  transcriptZh: '中文',
  transcriptBilingual: '双语',
  ttsPlay: '朗读',
  statsAndProgress: '统计与进度',
  reportGenerate: '智能报告',
  reportModeFilter: '按筛选条件',
  reportModeNl: '自然语言描述',
  reportModeFilterDesc: '按当前筛选条件（分类、等级、日期、播放量等）选择视频后生成报告',
  reportFilterConditions: '筛选条件（可修改）',
  reportMatchCount: '匹配 {n} 篇',
  reportModeNlDesc: '用自然语言描述需求，AI 自动选择合适视频并生成报告',
  reportTemplate: '报告模版',
  reportCustomPrompt: '附加内容（可选）',
  reportChars: '字',
  reportCustomPromptPlaceholder: '如：重点分析 AIP 的供应链场景，对比 Jacobs 和 Tampa General 的案例',
  reportNlQuery: '描述你的需求',
  reportNlQueryPlaceholder: '如：分析 Palantir AIP 在制造业的应用，重点看 Jacobs 和 Kinder Morgan 的案例',
  reportNlRequired: '请输入自然语言需求',
  reportGenerateBtn: '生成报告',
  reportGenerating: '生成中...',
  reportSelectedCount: '选中 {n} 个视频',
  reportWithTranscript: '有字幕 {n} 个',
  reportCopy: '复制',
  reportCopied: '已复制',
  reportGenerateAnother: '重新生成',
  reportHistory: '历史报告',
  reportView: '查看',
  reportDownloadPdf: '下载 PDF',
  reportDelete: '删除',
  reportNoHistory: '暂无历史报告',
  reportFilterReport: '筛选条件报告',
  reportStatusPending: '待开始',
  reportStatusProcessing: '进行中',
  reportStatusCompleted: '已完成',
  reportStatusFailed: '生成失败',
  usageGuide: '使用指南',
  videoPlayingOnLeft: '视频已放大至左侧播放，右侧可对照字幕与 AI 问答',
  videoClickToExpand: '点击放大播放',
  sources: '来源',
  clearChat: '清空对话',
  chatMaxRounds: '最多 {n} 轮',
  autoWhisperConvert: '无字幕自动转换',
  autoWhisperConvertDesc: '开启后，运行分析时自动对无字幕视频执行 Whisper 转换',
};

const en = {
  title: 'YouTube Video Analysis',
  refresh: 'Refresh',
  config: 'Settings',
  searchPlaceholder: 'Search title...',
  searchInKeywords: 'With keywords',
  transcriptAll: 'Transcript: All',
  transcriptHas: 'Has transcript',
  transcriptNo: 'No transcript',
  transcriptWhisper: 'Whisper converted',
  transcriptNative: 'Native captions',
  transcriptWhisperFilter: 'Auto converted',
  categoryAll: 'Category: All',
  categoryProduct: 'Product Intro',
  categoryNonProduct: 'Non-Product',
  categoryOther: 'Other',
  rankAll: 'Rank: All',
  rankFilter: 'Rank filter',
  rankSOnly: 'S only',
  rankAAbove: 'A+',
  rankBAbove: 'B+',
  dateFrom: 'From',
  dateTo: 'To',
  viewsMin: 'Views≥',
  viewsMax: '≤',
  viewsAny: 'Any',
  sortDate: 'Date',
  sortScore: 'Score',
  sortViews: 'Views',
  sortRank: 'Rank',
  perPage: 'Per page',
  items: 'items',
  totalPage: '{n} items, page {p}/{t}',
  loading: 'Loading...',
  noMatch: 'No matching videos',
  clickVideoForTranscript: 'Click a video to view transcript',
  transcriptSummary: 'Transcript & Summary',
  summary: 'Summary',
  detailedTranscript: 'Detailed transcript',
  noTranscript: 'No transcript for this video',
  transcriptNotFound: 'Transcript not found',
  aiChat: 'AI Chat',
  scopeAll: 'All videos',
  scopeCurrent: 'Current video',
  scopeCategory: 'By rank',
  askPlaceholder: 'Ask a question, e.g. What are the key features of Palantir AIP?',
  filterCounts: 'Filter by (keep if any match)',
  views20k: 'Views 20K+',
  since2024: 'Since Jan 2024',
  keywordMatch: 'Keyword match',
  filteredTotal: 'Filtered total',
  channelTotal: 'Channel total',
  totalVideos: 'Total videos',
  sLevelRatio: 'S ratio',
  hasTranscript: 'Has transcript',
  aboveA: 'A+',
  failed: 'Failed',
  retryHint: 'Retry',
  taskProgress: 'Progress',
  noTaskInProgress: 'No task in progress',
  whisperConfirmTitle: 'Confirm Whisper Conversion',
  whisperConfirmMsg: 'Convert {n} videos without subtitles using Whisper. This may take a while. Continue?',
  convertSingleConfirm: 'Convert this video with Whisper?',
  cancel: 'Cancel',
  confirm: 'Confirm',
  saved: 'Saved',
  processing: 'Processing...',
  filtering: 'Filtering...',
  copyCmd: 'Copy',
  retryHintDesc: 'Run the command above in project root to retry failed items',
  failedVideos: 'Failed videos',
  openYoutube: 'Open YouTube',
  labelTitle: 'Title',
  labelDate: 'Publish Date',
  labelScore: 'Score',
  labelRank: 'Rank',
  labelViews: 'Views',
  labelTranscript: 'Transcript',
  generatingSummary: 'Generating summary...',
  scopeFree: 'Free search',
  rankSLevel: 'S',
  rankALevel: 'A',
  rankBLevel: 'B',
  me: 'Me',
  ai: 'AI',
  requestFailed: 'Request failed',
  error: 'Error',
  configTitle: 'Scoring Rules',
  close: 'Close',
  keywordWeights: 'Keyword weights',
  keywordWeightsDesc: 'Score when keyword matches',
  points: 'pts',
  rankThresholds: 'Rank thresholds',
  rankThresholdsDesc: 'Min score for each rank',
  rankLevel: '',
  weightDistribution: 'Weight distribution',
  weightDistributionDesc: 'Weights in scoring formula',
  weightView: 'Views',
  weightTime: 'Recency',
  weightKeyword: 'Keywords',
  configHint: 'Config from config.json. Restart Python script after changes.',
  save: 'Save',
  saving: 'Saving…',
  saveSuccess: '✓ Saved',
  saveFailed: '✗ Save failed',
  runAnalysis: 'Run Analysis',
  runAnalysisStarting: 'Starting...',
  runAnalysisFull: 'Full pipeline',
  runAnalysisFilterOnly: 'Filter only',
  runAnalysisWhisper: 'Whisper transcribe',
  runAnalysisRetry: 'Retry failed',
  runAnalysisOthers: 'Process others',
  filterProgress: 'Filter progress',
  processProgress: 'Process progress',
  savedCount: 'saved',
  catOthers: 'Other',
  categoryStats: 'Category',
  uncategorized: 'Uncategorized',
  processHistory: 'Process History',
  whisperProgress: 'Whisper',
  whisperConverting: 'Whisper converting...',
  selectBoard: 'Select board',
  tempBoard: 'Temp Board',
  pasteVideoUrls: 'Paste 1-5 YouTube video URLs (one per line)',
  tempBoardDesc: 'Add YouTube video links for extraction and transcript conversion, max 5',
  tempBoardInputPlaceholder: 'https://www.youtube.com/watch?v=xxxxx',
  tempBoardAdd: 'Add',
  tempBoardUpload: 'Upload',
  tempBoardConfirm: 'Convert',
  tempBoardHint: '{n}/{max} links added',
  tempCleanEmpty: 'Clean empty records',
  tempEmptyHint: 'Videos will appear here after conversion',
  converting: 'Converting...',
  delete: 'Delete',
  convertNow: 'Convert Now',
  convertTranscript: 'Convert transcript',
  transcriptViewMode: 'Transcript view',
  transcriptEn: 'English',
  transcriptZh: 'Chinese',
  transcriptBilingual: 'Bilingual',
  ttsPlay: 'Read aloud',
  statsAndProgress: 'Stats & Progress',
  reportGenerate: 'Smart Report',
  reportModeFilter: 'By Filters',
  reportModeNl: 'Natural Language',
  reportModeFilterDesc: 'Select videos by current filters (category, rank, date, views) and generate report',
  reportFilterConditions: 'Filter conditions (editable)',
  reportMatchCount: '{n} matched',
  reportModeNlDesc: 'Describe your needs in natural language, AI selects videos and generates report',
  reportTemplate: 'Report Template',
  reportCustomPrompt: 'Additional content (optional)',
  reportChars: ' chars',
  reportCustomPromptPlaceholder: 'e.g. Focus on AIP supply chain use cases, compare Jacobs and Tampa General',
  reportNlQuery: 'Describe your needs',
  reportNlQueryPlaceholder: 'e.g. Analyze Palantir AIP in manufacturing, focus on Jacobs and Kinder Morgan',
  reportNlRequired: 'Please enter your natural language needs',
  reportGenerateBtn: 'Generate Report',
  reportGenerating: 'Generating...',
  reportSelectedCount: '{n} videos selected',
  reportWithTranscript: '{n} with transcript',
  reportCopy: 'Copy',
  reportCopied: 'Copied',
  reportGenerateAnother: 'Generate Another',
  reportHistory: 'Report History',
  reportView: 'View',
  reportDownloadPdf: 'Download PDF',
  reportDelete: 'Delete',
  reportNoHistory: 'No report history',
  reportFilterReport: 'Filter Report',
  reportStatusPending: 'Pending',
  reportStatusProcessing: 'Processing',
  reportStatusCompleted: 'Completed',
  reportStatusFailed: 'Failed',
  usageGuide: 'Usage Guide',
  videoPlayingOnLeft: 'Video playing on the left; use the right panel for transcript & AI chat',
  videoClickToExpand: 'Click to expand',
  sources: 'Sources',
  clearChat: 'Clear chat',
  chatMaxRounds: 'Max {n} rounds',
  autoWhisperConvert: 'Auto convert no-subtitle',
  autoWhisperConvertDesc: 'When enabled, auto-convert videos without captions during analysis',
};

const viewsOptions = [
  [0, ''],
  [5000, '5千'], [10000, '1万'], [15000, '1.5万'], [20000, '2万'], [25000, '2.5万'],
  [30000, '3万'], [40000, '4万'], [50000, '5万'], [75000, '7.5万'], [100000, '10万'],
  [150000, '15万'], [200000, '20万'], [250000, '25万'], [300000, '30万'], [500000, '50万'],
  [750000, '75万'], [1000000, '100万'], [1500000, '150万'], [2000000, '200万'],
];

const viewsOptionsEn = [
  [0, ''],
  [5000, '5K'], [10000, '10K'], [15000, '15K'], [20000, '20K'], [25000, '25K'],
  [30000, '30K'], [40000, '40K'], [50000, '50K'], [75000, '75K'], [100000, '100K'],
  [150000, '150K'], [200000, '200K'], [250000, '250K'], [300000, '300K'], [500000, '500K'],
  [750000, '750K'], [1000000, '1M'], [1500000, '1.5M'], [2000000, '2M'],
];

export const translations = { zh, en };
export { viewsOptions, viewsOptionsEn };

export function getViewsOptions(lang) {
  return lang === 'en' ? viewsOptionsEn : viewsOptions;
}

export function t(lang, key, params = {}) {
  const dict = translations[lang] || zh;
  let s = dict[key] ?? zh[key] ?? key;
  Object.entries(params).forEach(([k, v]) => {
    s = s.replace(`{${k}}`, v);
  });
  return s;
}
